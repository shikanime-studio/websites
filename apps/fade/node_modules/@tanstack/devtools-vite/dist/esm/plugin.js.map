{"version":3,"file":"plugin.js","sources":["../../src/plugin.ts"],"sourcesContent":["import { devtoolsEventClient } from '@tanstack/devtools-client'\nimport { ServerEventBus } from '@tanstack/devtools-event-bus/server'\nimport { normalizePath } from 'vite'\nimport chalk from 'chalk'\nimport { handleDevToolsViteRequest, readPackageJson } from './utils'\nimport { DEFAULT_EDITOR_CONFIG, handleOpenSource } from './editor'\nimport { removeDevtools } from './remove-devtools'\nimport { addSourceToJsx } from './inject-source'\nimport { enhanceConsoleLog } from './enhance-logs'\nimport { detectDevtoolsFile, injectPluginIntoFile } from './inject-plugin'\nimport {\n  addPluginToDevtools,\n  emitOutdatedDeps,\n  installPackage,\n} from './package-manager'\nimport type { Plugin } from 'vite'\nimport type { EditorConfig } from './editor'\nimport type { ServerEventBusConfig } from '@tanstack/devtools-event-bus/server'\n\nexport type TanStackDevtoolsViteConfig = {\n  /**\n   * Configuration for the editor integration. Defaults to opening in VS code\n   */\n  editor?: EditorConfig\n  /**\n   * The configuration options for the server event bus\n   */\n  eventBusConfig?: ServerEventBusConfig & {\n    /**\n     * Should the server event bus be enabled or not\n     * @default true\n     */\n    enabled?: boolean // defaults to true\n  }\n  /**\n   * Configuration for enhanced logging.\n   */\n  enhancedLogs?: {\n    /**\n     * Whether to enable enhanced logging.\n     * @default true\n     */\n    enabled: boolean\n  }\n  /**\n   * Whether to remove devtools from the production build.\n   * @default true\n   */\n  removeDevtoolsOnBuild?: boolean\n\n  /**\n   * Whether to log information to the console.\n   * @default true\n   */\n  logging?: boolean\n  /**\n   * Configuration for source injection.\n   */\n  injectSource?: {\n    /**\n     * Whether to enable source injection via data-tsd-source.\n     * @default true\n     */\n    enabled: boolean\n    /**\n     * List of files or patterns to ignore for source injection.\n     */\n    ignore?: {\n      files?: Array<string | RegExp>\n      components?: Array<string | RegExp>\n    }\n  }\n}\n\nexport const defineDevtoolsConfig = (config: TanStackDevtoolsViteConfig) =>\n  config\n\nexport const devtools = (args?: TanStackDevtoolsViteConfig): Array<Plugin> => {\n  let port = 5173\n  const logging = args?.logging ?? true\n  const enhancedLogsConfig = args?.enhancedLogs ?? { enabled: true }\n  const injectSourceConfig = args?.injectSource ?? { enabled: true }\n  const removeDevtoolsOnBuild = args?.removeDevtoolsOnBuild ?? true\n  const serverBusEnabled = args?.eventBusConfig?.enabled ?? true\n  const bus = new ServerEventBus(args?.eventBusConfig)\n\n  let devtoolsFileId: string | null = null\n\n  return [\n    {\n      enforce: 'pre',\n      name: '@tanstack/devtools:inject-source',\n      apply(config) {\n        return config.mode === 'development' && injectSourceConfig.enabled\n      },\n      transform(code, id) {\n        if (\n          id.includes('node_modules') ||\n          id.includes('?raw') ||\n          id.includes('dist') ||\n          id.includes('build')\n        )\n          return\n\n        return addSourceToJsx(code, id, args?.injectSource?.ignore)\n      },\n    },\n    {\n      name: '@tanstack/devtools:config',\n      enforce: 'pre',\n      config(_, { command }) {\n        // we do not apply any config changes for build\n        if (command !== 'serve') {\n          return\n        }\n\n        /*  const solidDedupeDeps = [\n          'solid-js',\n          'solid-js/web',\n          'solid-js/store',\n          'solid-js/html',\n          'solid-js/h',\n        ]\n\n        return {\n          resolve: {\n            dedupe: solidDedupeDeps,\n          },\n          optimizeDeps: {\n            include: solidDedupeDeps,\n          },\n        } */\n      },\n    },\n    {\n      enforce: 'pre',\n      name: '@tanstack/devtools:custom-server',\n      apply(config) {\n        // Custom server is only needed in development for piping events to the client\n        return config.mode === 'development'\n      },\n      configureServer(server) {\n        if (serverBusEnabled) {\n          bus.start()\n        }\n\n        server.middlewares.use((req, _res, next) => {\n          if (req.socket.localPort && req.socket.localPort !== port) {\n            port = req.socket.localPort\n          }\n          next()\n        })\n        if (server.config.server.port) {\n          port = server.config.server.port\n        }\n\n        server.httpServer?.on('listening', () => {\n          port = server.config.server.port\n        })\n\n        const editor = args?.editor ?? DEFAULT_EDITOR_CONFIG\n        const openInEditor: EditorConfig['open'] = async (\n          path,\n          lineNum,\n          columnNum,\n        ) => {\n          if (!path) {\n            return\n          }\n          await editor.open(path, lineNum, columnNum)\n        }\n        server.middlewares.use((req, res, next) =>\n          handleDevToolsViteRequest(req, res, next, (parsedData) => {\n            const { data, routine } = parsedData\n            if (routine === 'open-source') {\n              return handleOpenSource({\n                data: { type: data.type, data },\n                openInEditor,\n              })\n            }\n            return\n          }),\n        )\n      },\n    },\n    {\n      name: '@tanstack/devtools:remove-devtools-on-build',\n      apply(config, { command }) {\n        // Check both command and mode to support various hosting providers\n        // Some providers (Cloudflare, Netlify, Heroku) might not use 'build' command\n        // but will always set mode to 'production' for production builds\n        return (\n          (command !== 'serve' || config.mode === 'production') &&\n          removeDevtoolsOnBuild\n        )\n      },\n      enforce: 'pre',\n      transform(code, id) {\n        if (id.includes('node_modules') || id.includes('?raw')) return\n        const transform = removeDevtools(code, id)\n        if (!transform) return\n        if (logging) {\n          console.log(\n            `\\n${chalk.greenBright(`[@tanstack/devtools-vite]`)} Removed devtools code from: ${id.replace(normalizePath(process.cwd()), '')}\\n`,\n          )\n        }\n        return transform\n      },\n    },\n    {\n      name: '@tanstack/devtools:event-client-setup',\n      apply(config, { command }) {\n        if (\n          process.env.CI ||\n          process.env.NODE_ENV !== 'development' ||\n          command !== 'serve'\n        )\n          return false\n        return config.mode === 'development'\n      },\n      async configureServer() {\n        const packageJson = await readPackageJson()\n        const outdatedDeps = emitOutdatedDeps().then((deps) => deps)\n\n        // Listen for package installation requests\n        devtoolsEventClient.on('install-devtools', async (event) => {\n          const result = await installPackage(event.payload.packageName)\n          devtoolsEventClient.emit('devtools-installed', {\n            packageName: event.payload.packageName,\n            success: result.success,\n            error: result.error,\n          })\n\n          // If installation was successful, automatically add the plugin to devtools\n          if (result.success) {\n            const { packageName, pluginName, pluginImport } = event.payload\n\n            console.log(\n              chalk.blueBright(\n                `[@tanstack/devtools-vite] Auto-adding ${packageName} to devtools...`,\n              ),\n            )\n\n            const injectResult = addPluginToDevtools(\n              devtoolsFileId,\n              packageName,\n              pluginName,\n              pluginImport,\n            )\n\n            if (injectResult.success) {\n              // Emit plugin-added event so the UI updates\n              devtoolsEventClient.emit('plugin-added', {\n                packageName,\n                success: true,\n              })\n\n              // Also re-read package.json to update the UI with the newly installed package\n              const updatedPackageJson = await readPackageJson()\n              devtoolsEventClient.emit('package-json-read', {\n                packageJson: updatedPackageJson,\n              })\n            }\n          }\n        })\n\n        // Listen for add plugin to devtools requests\n        devtoolsEventClient.on('add-plugin-to-devtools', (event) => {\n          const { packageName, pluginName, pluginImport } = event.payload\n\n          console.log(\n            chalk.blueBright(\n              `[@tanstack/devtools-vite] Adding ${packageName} to devtools...`,\n            ),\n          )\n\n          const result = addPluginToDevtools(\n            devtoolsFileId,\n            packageName,\n            pluginName,\n            pluginImport,\n          )\n\n          devtoolsEventClient.emit('plugin-added', {\n            packageName,\n            success: result.success,\n            error: result.error,\n          })\n        })\n\n        // Handle bump-package-version event\n        devtoolsEventClient.on('bump-package-version', async (event) => {\n          const {\n            packageName,\n            devtoolsPackage,\n            pluginName,\n            minVersion,\n            pluginImport,\n          } = event.payload\n\n          console.log(\n            chalk.blueBright(\n              `[@tanstack/devtools-vite] Bumping ${packageName} to version ${minVersion}...`,\n            ),\n          )\n\n          // Install the package with the minimum version\n          const packageWithVersion = minVersion\n            ? `${packageName}@^${minVersion}`\n            : packageName\n\n          const result = await installPackage(packageWithVersion)\n\n          if (!result.success) {\n            console.log(\n              chalk.redBright(\n                `[@tanstack/devtools-vite] Failed to bump ${packageName}: ${result.error}`,\n              ),\n            )\n            devtoolsEventClient.emit('devtools-installed', {\n              packageName: devtoolsPackage,\n              success: false,\n              error: result.error,\n            })\n            return\n          }\n\n          console.log(\n            chalk.greenBright(\n              `[@tanstack/devtools-vite] Successfully bumped ${packageName} to ${minVersion}!`,\n            ),\n          )\n\n          // Check if we found the devtools file\n          if (!devtoolsFileId) {\n            console.log(\n              chalk.yellowBright(\n                `[@tanstack/devtools-vite] Devtools file not found. Skipping auto-injection.`,\n              ),\n            )\n            devtoolsEventClient.emit('devtools-installed', {\n              packageName: devtoolsPackage,\n              success: true,\n            })\n            return\n          }\n\n          // Now inject the devtools plugin\n          console.log(\n            chalk.blueBright(\n              `[@tanstack/devtools-vite] Adding ${devtoolsPackage} to devtools...`,\n            ),\n          )\n\n          const injectResult = injectPluginIntoFile(devtoolsFileId, {\n            packageName: devtoolsPackage,\n            pluginName,\n            pluginImport,\n          })\n\n          if (injectResult.success) {\n            console.log(\n              chalk.greenBright(\n                `[@tanstack/devtools-vite] Successfully added ${devtoolsPackage} to devtools!`,\n              ),\n            )\n\n            devtoolsEventClient.emit('plugin-added', {\n              packageName: devtoolsPackage,\n              success: true,\n            })\n\n            // Re-read package.json to update the UI\n            const updatedPackageJson = await readPackageJson()\n            devtoolsEventClient.emit('package-json-read', {\n              packageJson: updatedPackageJson,\n            })\n          } else {\n            console.log(\n              chalk.redBright(\n                `[@tanstack/devtools-vite] Failed to add ${devtoolsPackage} to devtools: ${injectResult.error}`,\n              ),\n            )\n\n            devtoolsEventClient.emit('plugin-added', {\n              packageName: devtoolsPackage,\n              success: false,\n              error: injectResult.error,\n            })\n          }\n        })\n\n        // whenever a client mounts we send all the current info to the subscribers\n        devtoolsEventClient.on('mounted', async () => {\n          devtoolsEventClient.emit('outdated-deps-read', {\n            outdatedDeps: await outdatedDeps,\n          })\n          devtoolsEventClient.emit('package-json-read', {\n            packageJson,\n          })\n        })\n      },\n      async handleHotUpdate({ file }) {\n        if (file.endsWith('package.json')) {\n          const newPackageJson = await readPackageJson()\n          devtoolsEventClient.emit('package-json-read', {\n            packageJson: newPackageJson,\n          })\n          emitOutdatedDeps()\n        }\n      },\n    },\n    {\n      name: '@tanstack/devtools:better-console-logs',\n      enforce: 'pre',\n      apply(config) {\n        return config.mode === 'development' && enhancedLogsConfig.enabled\n      },\n      transform(code, id) {\n        // Ignore anything external\n        if (\n          id.includes('node_modules') ||\n          id.includes('?raw') ||\n          id.includes('dist') ||\n          id.includes('build') ||\n          !code.includes('console.')\n        )\n          return\n\n        return enhanceConsoleLog(code, id, port)\n      },\n    },\n    {\n      name: '@tanstack/devtools:inject-plugin',\n      apply(config, { command }) {\n        return config.mode === 'development' && command === 'serve'\n      },\n      transform(code, id) {\n        // First pass: find where TanStackDevtools is imported\n        if (!devtoolsFileId && detectDevtoolsFile(code)) {\n          // Extract actual file path (remove query params)\n          const [filePath] = id.split('?')\n          if (filePath) {\n            devtoolsFileId = filePath\n          }\n        }\n\n        return undefined\n      },\n    },\n  ]\n}\n"],"names":[],"mappings":"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"}