---
import { BsFillPersonVcardFill } from "react-icons/bs";
import { Image } from "astro:assets";
import LogoutButton from "./LogoutButton";

interface Props {
  user: {
    name: string;
    image?: string | null;
  };
}
---

<div class="dropdown dropdown-end">
  <div tabindex="0" role="button" class="avatar btn btn-circle btn-ghost">
    <div class="w-10 rounded-full">
      <Image
        src={Astro.props.user.image ||
          `https://ui-avatars.com/api/?name=${Astro.props.user.name}`}
        alt={`${Astro.props.user.name} Avatar`}
        width="40"
        height="40"
        loading="eager"
      />
    </div>
  </div>
  <ul
    class="menu dropdown-content z-50 w-52 rounded-box bg-base-100 p-2 shadow"
  >
    <li>
      <a href="/user">
        <BsFillPersonVcardFill />
        User
      </a>
    </li>
    <li>
      <LogoutButton client:load />
    </li>
  </ul>
</div>
