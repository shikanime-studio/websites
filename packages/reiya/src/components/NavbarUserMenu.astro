---
import { BsBoxArrowRight, BsFillPersonVcardFill } from "react-icons/bs";
import { Image } from "astro:assets";
import type { getSessionForHome } from "../lib/session";

interface Props {
  account: NonNullable<
    Awaited<ReturnType<typeof getSessionForHome>>
  >["account"];
}
---

<div class="dropdown dropdown-end">
  <div tabindex="0" role="button" class="avatar btn btn-circle btn-ghost">
    <div class="w-10 rounded-full">
      <Image
        src={Astro.props.account.pictureUrl}
        alt={`${Astro.props.account.name} Avatar`}
        width="40"
        height="40"
        loading="eager"
      />
    </div>
  </div>
  <ul
    class="menu dropdown-content z-50 w-52 rounded-box bg-base-100 p-2 shadow"
  >
    <li>
      <a href="/account">
        <BsFillPersonVcardFill />
        Account
      </a>
    </li>
    <li>
      <a href={`/logout?redirect=${Astro.url.toString()}`}>
        <BsBoxArrowRight />
        Logout
      </a>
    </li>
  </ul>
</div>
