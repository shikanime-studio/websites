{"version":3,"file":"routes-manifest-plugin.js","sources":["../../../../src/start-router-plugin/generator-plugins/routes-manifest-plugin.ts"],"sourcesContent":["import { rootRouteId } from '@tanstack/router-core'\n\nimport type { GeneratorPlugin } from '@tanstack/router-generator'\n\n/**\n * this plugin builds the routes manifest and stores it on globalThis\n * so that it can be accessed later (e.g. from a vite plugin)\n */\nexport function routesManifestPlugin(): GeneratorPlugin {\n  return {\n    name: 'routes-manifest-plugin',\n    onRouteTreeChanged: ({ routeTree, rootRouteNode, routeNodes }) => {\n      const allChildren = routeTree.map((d) => d.routePath)\n      const routes: Record<\n        string,\n        {\n          filePath: string\n          children: Array<string>\n        }\n      > = {\n        [rootRouteId]: {\n          filePath: rootRouteNode.fullPath,\n          children: allChildren,\n        },\n        ...Object.fromEntries(\n          routeNodes.map((d) => {\n            const filePathId = d.routePath\n\n            return [\n              filePathId,\n              {\n                filePath: d.fullPath,\n                children: d.children?.map((childRoute) => childRoute.routePath),\n              },\n            ]\n          }),\n        ),\n      }\n\n      globalThis.TSS_ROUTES_MANIFEST = routes\n    },\n  }\n}\n"],"names":[],"mappings":";AAQO,SAAS,uBAAwC;AACtD,SAAO;AAAA,IACL,MAAM;AAAA,IACN,oBAAoB,CAAC,EAAE,WAAW,eAAe,iBAAiB;AAChE,YAAM,cAAc,UAAU,IAAI,CAAC,MAAM,EAAE,SAAS;AACpD,YAAM,SAMF;AAAA,QACF,CAAC,WAAW,GAAG;AAAA,UACb,UAAU,cAAc;AAAA,UACxB,UAAU;AAAA,QAAA;AAAA,QAEZ,GAAG,OAAO;AAAA,UACR,WAAW,IAAI,CAAC,MAAM;AACpB,kBAAM,aAAa,EAAE;AAErB,mBAAO;AAAA,cACL;AAAA,cACA;AAAA,gBACE,UAAU,EAAE;AAAA,gBACZ,UAAU,EAAE,UAAU,IAAI,CAAC,eAAe,WAAW,SAAS;AAAA,cAAA;AAAA,YAChE;AAAA,UAEJ,CAAC;AAAA,QAAA;AAAA,MACH;AAGF,iBAAW,sBAAsB;AAAA,IACnC;AAAA,EAAA;AAEJ;"}