{"version":3,"file":"getGlobalStartContext.js","sources":["../../src/getGlobalStartContext.ts"],"sourcesContent":["import { getStartContext } from '@tanstack/start-storage-context'\nimport { createIsomorphicFn } from '@tanstack/start-fn-stubs'\nimport type { AssignAllServerRequestContext } from './createMiddleware'\nimport type { Expand, Register } from '@tanstack/router-core'\n\nexport const getGlobalStartContext: () =>\n  | Expand<AssignAllServerRequestContext<Register, []>>\n  | undefined = createIsomorphicFn()\n  .client(() => undefined)\n  .server(() => {\n    const context = getStartContext().contextAfterGlobalMiddlewares\n    if (!context) {\n      throw new Error(\n        `Global context not set yet, you are calling getGlobalStartContext() before the global middlewares are applied.`,\n      )\n    }\n    return context\n  })\n"],"names":[],"mappings":";;AAKO,MAAM,wBAEG,qBACb,OAAO,MAAM,MAAS,EACtB,OAAO,MAAM;AACZ,QAAM,UAAU,kBAAkB;AAClC,MAAI,CAAC,SAAS;AACZ,UAAM,IAAI;AAAA,MACR;AAAA,IAAA;AAAA,EAEJ;AACA,SAAO;AACT,CAAC;"}