{"version":3,"file":"browser-polyfills.js","sources":["../../../src/utils/browser-polyfills.ts"],"sourcesContent":["// Type definitions for requestIdleCallback - compatible with existing browser types\nexport type IdleCallbackDeadline = {\n  didTimeout: boolean\n  timeRemaining: () => number\n}\n\nexport type IdleCallbackFunction = (deadline: IdleCallbackDeadline) => void\n\nconst requestIdleCallbackPolyfill = (\n  callback: IdleCallbackFunction,\n): number => {\n  // Use a very small timeout for the polyfill to simulate idle time\n  const timeout = 0\n  const timeoutId = setTimeout(() => {\n    callback({\n      didTimeout: true, // Always indicate timeout for the polyfill\n      timeRemaining: () => 50, // Return some time remaining for polyfill\n    })\n  }, timeout)\n  return timeoutId as unknown as number\n}\n\nconst cancelIdleCallbackPolyfill = (id: number): void => {\n  clearTimeout(id as unknown as ReturnType<typeof setTimeout>)\n}\n\nexport const safeRequestIdleCallback: (\n  callback: IdleCallbackFunction,\n  options?: { timeout?: number },\n) => number =\n  typeof window !== `undefined` && `requestIdleCallback` in window\n    ? (callback, options) =>\n        (window as any).requestIdleCallback(callback, options)\n    : (callback, _options) => requestIdleCallbackPolyfill(callback)\n\nexport const safeCancelIdleCallback: (id: number) => void =\n  typeof window !== `undefined` && `cancelIdleCallback` in window\n    ? (id) => (window as any).cancelIdleCallback(id)\n    : cancelIdleCallbackPolyfill\n"],"names":[],"mappings":"AAQA,MAAM,8BAA8B,CAClC,aACW;AAEX,QAAM,UAAU;AAChB,QAAM,YAAY,WAAW,MAAM;AACjC,aAAS;AAAA,MACP,YAAY;AAAA;AAAA,MACZ,eAAe,MAAM;AAAA;AAAA,IAAA,CACtB;AAAA,EACH,GAAG,OAAO;AACV,SAAO;AACT;AAEA,MAAM,6BAA6B,CAAC,OAAqB;AACvD,eAAa,EAA8C;AAC7D;AAEO,MAAM,0BAIX,OAAO,WAAW,eAAe,yBAAyB,SACtD,CAAC,UAAU,YACR,OAAe,oBAAoB,UAAU,OAAO,IACvD,CAAC,UAAU,aAAa,4BAA4B,QAAQ;AAE3D,MAAM,yBACX,OAAO,WAAW,eAAe,wBAAwB,SACrD,CAAC,OAAQ,OAAe,mBAAmB,EAAE,IAC7C;"}